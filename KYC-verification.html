<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sarafa Community Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <link rel="icon" href="Assets/Images/logo.png" type="image/x-icon">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="header-left">
                <div class="community-name">
                    <span>Sarafa Community</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <nav class="nav-menu">
                    <a href="Index.html" class="nav-item">Home</a>
                    <a href="Events-meetings.html" class="nav-item">Event</a>
                    <a href="Member.html" class="nav-item">Members</a>
                    <div class="nav-item dropdown">
                        <span>More</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </nav>
            </div>
            <div class="header-right">
                <div class="search-container">
                    <input type="text" placeholder="Search" class="search-input">
                    <i class="fas fa-search search-icon"></i>
                </div>
                <div class="user-avatar" id="userAvatar">
                    <i class="fas fa-user"></i>
                    <div class="avatar-dropdown" id="avatarDropdown" style="display: none;">
                        <div class="avatar-user-info">
                            <div class="avatar-user-pic"><i class="fas fa-user"></i></div>
                            <div class="avatar-user-details">
                                <span class="avatar-user-name">Piyush Rathore </span>
                                <span class="avatar-user-email">Piyush@email.com</span>
                            </div>  
                        </div>
                        <ul>
                            <li id="profileDetailsBtn"><i class="fas fa-user-circle"></i> Profile</li>
                            <li><i class="fas fa-cog"></i> Settings</li>
                            <li id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-menu">
              <a href="Index.html" class="menu-item ">
                Dashboard
              </a>
              <a href="Member.html" class="menu-item">
                Member
                <i class="fas fa-plus"></i>
              </a>
              <a href="Discussion-chat.html" class="menu-item">
                 Discussion/Chat
                    <i class="fas fa-comment"></i>
              </a>
              <a href="Announcement.html" class="menu-item">
                  Announcement
                    <i class="fas fa-bullhorn"></i>
              </a>
              <a href="Events-meetings.html" class="menu-item">            
                    Events/Meetings
                    <i class="fas fa-calendar"></i>
              </a>
              <a href="Monthly-membership.html" class="menu-item">
                
                    Monthly Membership
                    <i class="fas fa-users"></i>
            </a>
              <a href="KYC-verification.html" class="menu-item active cs_btn cs_style_1 cs_bg_1 cs_white_color effect_hover">
                  KYC Verification
                    <i class="fas fa-shield-alt"></i>                
              </a>
              <a href="Media-gallery.html" class="menu-item">
                      Media Gallery
                    <i class="fas fa-images"></i>
              </a>
              <a href="Whatsapp-sms.html" class="menu-item">
                      Whatsapp &SMS
                    <i class="fas fa-message"></i>            
              </a>
              </div>
        </aside>
        <main class="main-content">
          <h1 class="page-title">KYC Verification</h1>
          
          <form class="kyc-form colorful" id="kycForm">
              <!-- Step 1: Personal Information -->
              <div class="kyc-step" id="kycStep1">
                  <div class="kyc-section">
                      <div class="kyc-section-title">
                          <i class="fas fa-user"></i> Personal Information
                      </div>
                      <div class="kyc-fields-grid">
                          <div class="form-group">
                              <label for="fullName">Full Name *</label>
                              <input type="text" id="fullName" name="fullName" class="kyc-input" placeholder="Enter full name" required>
                          </div>
                          <div class="form-group">
                              <label for="dob">Date of Birth *</label>
                              <input type="date" id="dob" name="dob" class="kyc-input" required>
                          </div>
                          <div class="form-group">
                              <label for="state">State *</label>
                              <input type="text" id="state" name="state" class="kyc-input" placeholder="State" required>
                          </div>
                          <div class="form-group">
                              <label for="city">City *</label>
                              <input type="text" id="city" name="city" class="kyc-input" placeholder="City" required>
                          </div>
                          <div class="form-group">
                              <label for="postalCode">Postal Code *</label>
                              <input type="text" id="postalCode" name="postalCode" class="kyc-input" placeholder="Postal Code" required>
                          </div>
                          <div class="form-group full-width">
                              <label for="address">Full Address *</label>
                              <textarea id="address" name="address" class="kyc-input" placeholder="Full Address" rows="3" required></textarea>
                          </div>
                      </div>
                  </div>
                  <div class="kyc-submit-section" style="text-align:right;">
                      <button type="button" class="kyc-submit-btn" id="kycStep1Next">Save & Next <i class="fas fa-arrow-right"></i></button>
                  </div>
              </div>
              <!-- Step 2: Shop Details & Workers -->
              <div class="kyc-step" id="kycStep2" style="display:none;">
                  <div class="kyc-section">
                      <div class="kyc-section-title">
                          <i class="fas fa-store"></i> Shop Details & Workers
                      </div>
                      <div class="kyc-fields-grid">
                          <div class="form-group">
                              <label for="shopName">Shop Name *</label>
                              <input type="text" id="shopName" name="shopName" class="kyc-input" placeholder="Shop Name" required>
                          </div>
                          <div class="form-group full-width">
                              <label for="shopAddress">Shop Address *</label>
                              <textarea id="shopAddress" name="shopAddress" class="kyc-input" placeholder="Shop Address" rows="3" required></textarea>
                          </div>
                          <div class="form-group">
                              <label for="numWorkers">Number of Workers</label>
                              <input type="number" id="numWorkers" name="numWorkers" class="kyc-input" min="0" placeholder="0">
                          </div>
                      </div>
                      <div class="kyc-workers-section">
                          <label>Workers' Details</label>
                          <div id="workersContainer" class="workers-container">
                              <!-- Workers will be added here dynamically -->
                          </div>
                          <button type="button" id="addWorkerBtn" class="add-worker-btn">
                              <i class="fas fa-plus"></i> Add Worker
                          </button>
                      </div>
                  </div>
                  <div class="kyc-submit-section" style="display:flex; justify-content:space-between;">
                      <button type="button" class="kyc-submit-btn" id="kycStep2Back"><i class="fas fa-arrow-left"></i> Back</button>
                      <button type="button" class="kyc-submit-btn" id="kycStep2Next">Save & Next <i class="fas fa-arrow-right"></i></button>
                  </div>
              </div>
              <!-- Step 3: KYC Documents -->
              <div class="kyc-step" id="kycStep3" style="display:none;">
                  <div class="kyc-section">
                      <div class="kyc-section-title">
                          <i class="fas fa-id-card"></i> KYC Documents
                      </div>
                      <div class="kyc-fields-grid">
                          <div class="form-group">
                              <label for="aadhaarCard">Aadhaar Card *</label>
                              <input type="file" id="aadhaarCard" name="aadhaarCard" class="kyc-input" accept="image/*,application/pdf" required>
                              <small>Upload Aadhaar card image or PDF</small>
                          </div>
                          <div class="form-group">
                              <label for="shopLicence">Shop Licence *</label>
                              <input type="file" id="shopLicence" name="shopLicence" class="kyc-input" accept="image/*,application/pdf" required>
                              <small>Upload shop licence image or PDF</small>
                          </div>
                          <div class="form-group">
                              <label for="panCard">PAN Card *</label>
                              <input type="file" id="panCard" name="panCard" class="kyc-input" accept="image/*,application/pdf" required>
                              <small>Upload PAN card image or PDF</small>
                          </div>
                      </div>
                  </div>
                  <div class="kyc-submit-section" style="display:flex; justify-content:space-between;">
                      <button type="button" class="kyc-submit-btn" id="kycStep3Back"><i class="fas fa-arrow-left"></i> Back</button>
                      <button type="submit" class="kyc-submit-btn" id="kycStep3Submit">
                          <i class="fas fa-check"></i> Submit KYC
                      </button>
                  </div>
              </div>
          </form>
      </main>
  </div>
       <script src="script.js"></script>
       <div id="profileModal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
          <div class="modal-header">
            <span>Profile Details</span>
            <button class="modal-close-btn" id="closeProfileModal">&times;</button>
          </div>
          <div class="modal-body">
            <form id="profileForm" class="modal-form">
              <div class="modal-form-group">
                <label for="profileName" class="required">Name</label>
                <input type="text" id="profileName" class="modal-input" value="Piyush Rathore" required>
              </div>
              <div class="modal-form-group">
                <label for="profileEmail" class="required">Email</label>
                <input type="email" id="profileEmail" class="modal-input" value="Piyush@email.com" required>
              </div>
              <div class="modal-form-group">
                <label for="profilepassword" class="required">Password</label>
                <input type="password" id="profilepassword" class="modal-input" value="********" required>
              </div>
              <div class="modal-form-group">
                <label for="profileDOB" class="required">Date of Birth</label>
                <input type="date" id="profileDOB" class="modal-input" value="1990-01-01" required>
              </div>
              <div class="modal-form-group">
                <label for="profilePhone">Phone</label>
                <input type="tel" id="profilePhone" class="modal-input" value="+91 98765 43210">
              </div>
              <div class="modal-form-group">
                <label for="Country">Country</label>
                <input type="text" id="Country" class="modal-input" value="India" required>
              </div>
              <div class="modal-form-group">
                <label for="Pincode">Pincode</label>
                <input type="text" id="Pincode" class="modal-input" value="302001" required>
              </div>
              <div class="modal-form-group">
                <label for="profileAddress">Address</label>
                <textarea id="profileAddress" class="modal-input modal-textarea"></textarea>
              </div>
              <div class="modal-form-group">
                <label for="shopname">Shop Name</label>
                <input type="text" id="shopname" class="modal-input" value="Sarafa" required>
              </div>
              <div class="modal-form-group">
                <label for="shopaddress">Shop Address</label>
                <input type="text" id="shopaddress" class="modal-input" value="Bhopal Kolar" required>
              </div>
              <div class="modal-form-group">
                <label for="Employee">NumberEmp</label>
                <input type="text" id="Employee" class="modal-input" value="10" required>
              </div>
            
              
              <div class="modal-footer">
                <button type="button" class="modal-btn modal-btn-secondary" id="closeProfileModal2">Cancel</button>
                <button type="submit" class="modal-btn modal-btn-primary">Save</button>
              </div>
            </form>
          </div>
        </div>
      </div>
      </body>
      <script>
        // Function to add a worker field
function addWorkerField() {
    const workersContainer = document.getElementById('workersContainer');
    const workerIndex = workersContainer.children.length;
    
    const workerField = document.createElement('div');
    workerField.className = 'worker-field';
    workerField.innerHTML = `
        <div class="form-group">
            <label for="workerName${workerIndex}">Worker Name</label>
            <input type="text" id="workerName${workerIndex}" name="workerName${workerIndex}" class="kyc-input" placeholder="Enter worker name">
        </div>
        <div class="form-group">
            <label for="workerPhone${workerIndex}">Phone Number</label>
            <input type="tel" id="workerPhone${workerIndex}" name="workerPhone${workerIndex}" class="kyc-input" placeholder="Enter phone number">
        </div>
        <button type="button" class="remove-worker-btn" onclick="removeWorkerField(this)">
            <i class="fas fa-trash"></i>
        </button>
    `;
    
    workersContainer.appendChild(workerField);
    
    // Update the number of workers input
    const numWorkersInput = document.getElementById('numWorkers');
    if (numWorkersInput) {
        numWorkersInput.value = workersContainer.children.length;
    }
}

// Function to remove a worker field
function removeWorkerField(button) {
    const workerField = button.closest('.worker-field');
    workerField.remove();
    
    // Update the number of workers input
    const workersContainer = document.getElementById('workersContainer');
    const numWorkersInput = document.getElementById('numWorkers');
    if (numWorkersInput && workersContainer) {
        numWorkersInput.value = workersContainer.children.length;
    }
}

// Function to update workers fields based on number input
function updateWorkersFields(numWorkers) {
    const workersContainer = document.getElementById('workersContainer');
    if (!workersContainer) return;
    
    const currentWorkers = workersContainer.children.length;
    
    if (numWorkers > currentWorkers) {
        // Add more workers
        for (let i = currentWorkers; i < numWorkers; i++) {
            addWorkerField();
        }
    } else if (numWorkers < currentWorkers) {
        // Remove workers
        const workersToRemove = currentWorkers - numWorkers;
        for (let i = 0; i < workersToRemove; i++) {
            const lastWorker = workersContainer.lastElementChild;
            if (lastWorker) {
                lastWorker.remove();
            }
        }
    }
}

// Function to handle KYC form submission
function handleKYCSubmission() {
    // Get form data
    const formData = new FormData(document.getElementById('kycForm'));
    const formObject = {};
    
    for (let [key, value] of formData.entries()) {
        formObject[key] = value;
    }
    
    // Validate required fields
    const requiredFields = ['fullName', 'dob', 'nationality', 'state', 'city', 'postalCode', 'address', 'shopOwner', 'shopName', 'shopAddress', 'aadhaarCard', 'shopLicence', 'panCard'];
    const missingFields = [];
    
    requiredFields.forEach(field => {
        if (!formObject[field] || formObject[field].trim() === '') {
            missingFields.push(field);
        }
    });
    
    if (missingFields.length > 0) {
        alert('Please fill in all required fields: ' + missingFields.join(', '));
        return;
    }
    
    // Validate file uploads
    const fileFields = ['aadhaarCard', 'shopLicence', 'panCard'];
    const missingFiles = [];
    
    fileFields.forEach(field => {
        const fileInput = document.getElementById(field);
        if (!fileInput.files || fileInput.files.length === 0) {
            missingFiles.push(field);
        }
    });
    
    if (missingFiles.length > 0) {
        alert('Please upload all required documents: ' + missingFiles.join(', '));
        return;
    }
    
    // Show success message
    alert('KYC form submitted successfully! Your application is under review.');
    
    // Reset form
    document.getElementById('kycForm').reset();
    
    // Clear workers container
    const workersContainer = document.getElementById('workersContainer');
    if (workersContainer) {
        workersContainer.innerHTML = '';
    }
    
    // Reset number of workers
    const numWorkersInput = document.getElementById('numWorkers');
    if (numWorkersInput) {
        numWorkersInput.value = '';
    }
}
 
// --- KYC Multi-Step Form Logic ---
document.addEventListener('DOMContentLoaded', function() {
  const steps = [
    document.getElementById('kycStep1'),
    document.getElementById('kycStep2'),
    document.getElementById('kycStep3')
  ];
  let currentStep = 0;
  const formData = {};

  function showStep(idx) {
    steps.forEach((step, i) => {
      if (step) step.style.display = (i === idx) ? '' : 'none';
    });
    currentStep = idx;
  }

  function validateStep(idx) {
    // Basic validation: check required fields in the current step
    const requiredInputs = steps[idx].querySelectorAll('[required]');
    let valid = true;
    requiredInputs.forEach(input => {
      if (input.type === 'file') {
        if (!input.files || input.files.length === 0) {
          valid = false;
          input.classList.add('input-error');
        } else {
          input.classList.remove('input-error');
        }
      } else if (!input.value) {
        valid = false;
        input.classList.add('input-error');
      } else {
        input.classList.remove('input-error');
      }
    });
    return valid;
  }

  function saveStepData(idx) {
    // Save all input values in the current step
    const inputs = steps[idx].querySelectorAll('input, textarea');
    inputs.forEach(input => {
      if (input.type === 'file') {
        formData[input.name] = input.files && input.files[0] ? input.files[0] : null;
      } else {
        formData[input.name] = input.value;
      }
    });
  }

  // Step 1 Next
  const step1Next = document.getElementById('kycStep1Next');
  if (step1Next) {
    step1Next.addEventListener('click', function() {
      if (validateStep(0)) {
        saveStepData(0);
        showStep(1);
      } else {
        showNotification('Please fill all required fields in this step.', 'error');
      }
    });
  }
  // Step 2 Back/Next
  const step2Back = document.getElementById('kycStep2Back');
  const step2Next = document.getElementById('kycStep2Next');
  if (step2Back) {
    step2Back.addEventListener('click', function() {
      showStep(0);
    });
  }
  if (step2Next) {
    step2Next.addEventListener('click', function() {
      if (validateStep(1)) {
        saveStepData(1);
        showStep(2);
      } else {
        showNotification('Please fill all required fields in this step.', 'error');
      }
    });
  }
  // Step 3 Back
  const step3Back = document.getElementById('kycStep3Back');
  if (step3Back) {
    step3Back.addEventListener('click', function() {
      showStep(1);
    });
  }
  // On submit, validate last step and show success
  const kycForm = document.getElementById('kycForm');
  if (kycForm) {
    kycForm.addEventListener('submit', function(e) {
      if (!validateStep(2)) {
        e.preventDefault();
        showNotification('Please fill all required fields in this step.', 'error');
        return;
      }
      saveStepData(2);
      // You can now use formData for submission (e.g., AJAX)
      showNotification('KYC form submitted successfully!', 'success');
      // Optionally reset form and go to first step
      setTimeout(() => {
        kycForm.reset();
        showStep(0);
      }, 1000);
      e.preventDefault();
    });
  }
  // Show first step on load
  showStep(0);
});
 </script>
      </html>